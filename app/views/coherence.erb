<style>
  @keyframes circleAnimation {
    0% { r: 0%; }
    100% { r: 50%; }
  }

  @keyframes instructionsAnimation {
    0% { opacity: 0%; }
    100% { opacity: 100%; }
  }

  .zoom-in-and-out {
    animation: circleAnimation 5s 6 alternate forwards;
  }

  .opacity-in-and-out {
    animation: instructionsAnimation 5s 6 alternate forwards;
  }
</style>

<div class="circles">
  <p id="warning">‚ö†Ô∏è L'exercice n'est pas r√©alisable car votre navigateur se mettrait en veille en plein milieu !</p>
  <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 100" role="graphics-document">
    <circle cx="50" cy="50" r="50" fill="#b8c4ce" />
    <circle cx="50" cy="50" r="0" fill="#1b655e" id="moving-circle" />
    <circle cx="50" cy="50" r="0.5" fill="#caa53d" />
  </svg>
  <p id="instructions">Cliquez et commencez par inspirer par le nez pendant 5s tout en gonflant votre ventre</p>
</div>

<script>
  if ("wakeLock" in navigator) {
    let movingCircle = document.getElementById("moving-circle");
    let instructions = document.getElementById("instructions");

    document.getElementsByTagName("header")[0].remove();
    document.getElementById("warning").remove();

    let wakeLock = null;

    // async function to request a wake lock
    const requestWakeLock = async () => {
      try {
        wakeLock = await navigator.wakeLock.request("screen");
        wakeLock.onrelease = () => console.log("Wake Lock has been released üîì");
      } catch (err) {
        window.alert(err.name + " : " + err.message);
      }
    } // requestWakeLock()

    document.addEventListener("click", () => {
      let iterationCount = 0;
      requestWakeLock();
      console.log("Wake Lock is active üîí");

      movingCircle.classList.toggle("zoom-in-and-out");
      instructions.classList.toggle("opacity-in-and-out");

      instructions.addEventListener("animationiteration", () => {
        iterationCount++;
        // check if iterationCount is odd or even
        if (iterationCount === 1 || iterationCount & 1) {
           instructions.textContent = "Expirez par la bouche, d√©gonflez le ventre"
        }
        else {
          instructions.textContent = "Inspirez par le nez en gonflant le ventre"
        }
      });

      window.setTimeout(() => {
        wakeLock.release().then(() => {
          wakeLock = null;
        });
      // }, 300000);
      }, 30000);
    })
  } else {
    console.log("Wake lock is not supported by this browser üòì");
    document.getElementsByTagName("svg")[0].remove();
    document.getElementsByTagName("p")[1].remove();
  }
</script>